"use strict";var I=Object.defineProperty;var xe=Object.getOwnPropertyDescriptor;var Se=Object.getOwnPropertyNames;var Ae=Object.prototype.hasOwnProperty;var we=(t,e)=>{for(var n in e)I(t,n,{get:e[n],enumerable:!0})},be=(t,e,n,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Se(e))!Ae.call(t,r)&&r!==n&&I(t,r,{get:()=>e[r],enumerable:!(a=xe(e,r))||a.enumerable});return t};var Te=t=>be(I({},"__esModule",{value:!0}),t);var Je={};we(Je,{default:()=>ge});module.exports=Te(Je);var s=require("@raycast/api"),g=require("react");var ye=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),Le=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),Pe=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),Re=/[^\p{L}\d]+/giu,D="$1\0$2",j="";function W(t){let e=t.trim();e=e.replace(ye,D).replace(Le,D),e=e.replace(Re,"\0");let n=0,a=e.length;for(;e.charAt(n)==="\0";)n++;if(n===a)return[];for(;e.charAt(a-1)==="\0";)a--;return e.slice(n,a).split(/\0/g)}function Ee(t){let e=W(t);for(let n=0;n<e.length;n++){let a=e[n],r=Pe.exec(a);if(r){let c=r.index+(r[1]??r[2]).length;e.splice(n,1,a.slice(0,c),a.slice(c))}}return e}function A(t,e){let[n,a,r]=T(t,e);return n+a.map(L(e?.locale)).join(e?.delimiter??" ")+r}function X(t,e){let[n,a,r]=T(t,e),c=L(e?.locale),l=P(e?.locale),f=e?.mergeAmbiguousCharacters?k(c,l):Y(c,l);return n+a.map((d,u)=>u===0?c(d):f(d,u)).join(e?.delimiter??"")+r}function J(t,e){let[n,a,r]=T(t,e),c=L(e?.locale),l=P(e?.locale),f=e?.mergeAmbiguousCharacters?k(c,l):Y(c,l);return n+a.map(f).join(e?.delimiter??"")+r}function H(t,e){return R(t,{delimiter:"_",...e})}function R(t,e){let[n,a,r]=T(t,e),c=L(e?.locale),l=P(e?.locale);return n+a.map(k(c,l)).join(e?.delimiter??" ")+r}function K(t,e){let[n,a,r]=T(t,e);return n+a.map(P(e?.locale)).join(e?.delimiter??"_")+r}function V(t,e){return A(t,{delimiter:".",...e})}function E(t,e){return A(t,{delimiter:"-",...e})}function B(t,e){return A(t,{delimiter:"/",...e})}function Q(t,e){let[n,a,r]=T(t,e),c=L(e?.locale),l=P(e?.locale),f=k(c,l);return n+a.map((d,u)=>u===0?f(d):c(d)).join(e?.delimiter??" ")+r}function q(t,e){return A(t,{delimiter:"_",...e})}function G(t,e){return R(t,{delimiter:"-",...e})}function L(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}function P(t){return t===!1?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t)}function k(t,e){return n=>`${e(n[0])}${t(n.slice(1))}`}function Y(t,e){return(n,a)=>{let r=n[0];return(a>0&&r>="0"&&r<="9"?"_"+r:e(r))+t(n.slice(1))}}function T(t,e={}){let n=e.split??(e.separateNumbers?Ee:W),a=e.prefixCharacters??j,r=e.suffixCharacters??j,c=0,l=t.length;for(;c<t.length;){let f=t.charAt(c);if(!a.includes(f))break;c++}for(;l>c;){let f=l-1,d=t.charAt(f);if(!r.includes(d))break;l=f}return[t.slice(0,c),n(t.slice(c,l)),t.slice(l)]}var ae=require("@raycast/api");var ke=/(\S+)|(.)/g,_e=new RegExp("[\\.#]\\p{Alphabetic}","u"),Oe=new RegExp("\\p{Ll}(?=[\\p{Lu}])","u"),Ue=new RegExp("\\p{Alphabetic}+","gu"),Fe=new RegExp("^(\\P{Alphabetic})*(?:\\p{Alphabetic}\\.){2,}(\\P{Alphabetic})*$","u"),ve=new Set(["\u2014","\u2013","-","\u2015","/"]),ee=new Set([".","!","?"]),Ie=new Set([...ee,":",'"',"'","\u201D"]),N=new Set(["a","an","and","as","at","because","but","by","en","for","if","in","neither","nor","of","on","only","or","over","per","so","some","than","that","the","to","up","upon","v","versus","via","vs","when","with","without","yet"]);function te(t,e={}){let{locale:n=void 0,sentenceCase:a=!1,sentenceTerminators:r=ee,titleTerminators:c=Ie,smallWords:l=N,wordSeparators:f=ve}=typeof e=="string"||Array.isArray(e)?{locale:e}:e,d=a?r:c,u="",h=!0;for(let m of t.matchAll(ke)){let{1:p,2:y,index:v=0}=m;if(y){u+=y;continue}if(_e.test(p)){let x=p.match(Fe);if(x){let[w,o="",C=""]=x;u+=a&&!h?p:Z(p,o.length,n),h=d.has(C.charAt(0));continue}u+=p,h=d.has(p.charAt(p.length-1))}else{let x=Array.from(p.matchAll(Ue)),w=p,o=!1;for(let C=0;C<x.length;C++){let{0:b,index:S=0}=x[C],$=p.charAt(S+b.length);if(o=d.has($),h)h=!1;else{if(a||Oe.test(b))continue;if(x.length===1){if(l.has(b)&&!(v+p.length===t.length)&&!o)continue}else if(C>0&&(!f.has(p.charAt(S-1))||l.has(b)&&f.has($)))continue}w=Z(w,S,n)}u+=w,h=o||d.has(p.charAt(p.length-1))}}return u}function Z(t,e,n){return t.slice(0,e)+t.charAt(e).toLocaleUpperCase(n)+t.slice(e+1)}function ne(t,e){let n="";for(let a of t)n+=Math.random()>.5?a.toLocaleUpperCase(e):a.toLocaleLowerCase(e);return n}function se(t,e){let n="";for(let a of t){let r=a.toLocaleLowerCase(e);n+=a===r?a.toLocaleUpperCase(e):r}return n}function oe(t){return new RegExp("\\p{L}","u").test(t)}var re=(t,e)=>ne(t),ce=(t,e)=>se(t),ie=(t,e)=>A(t,e).toLowerCase(),le=(t,e)=>{if(t.length<=1)return t.toLowerCase();let n="";for(let a=0;a<t.length;a++){if(oe(t[a])){n+=t[a].toLowerCase();break}n+=t[a]}return n+t.slice(n.length)},Ce=(t,e)=>E(t,e).toUpperCase(),Ne=(t,e,n)=>{let a=(0,ae.getPreferenceValues)().exceptions.split(",").map(c=>c.trim())??[],r=new Set([...a,...N]);return te(t,{sentenceCase:e,smallWords:r})};var pe=(t,e)=>Ne(t,!1,e),fe=(t,e)=>A(t,e).toUpperCase(),ue=(t,e)=>{if(t.length<=1)return t.toUpperCase();let n="";for(let a=0;a<t.length;a++){if(oe(t[a])){n+=t[a].toUpperCase();break}n+=t[a]}return n+t.slice(n.length)};var de=require("@raycast/api"),_={"Camel Case":X,"Capital Case":R,"Constant Case":K,"Dot Case":V,"Header Case":G,"Lower Case":ie,"Lower First":le,"No Case":A,"Kebab Case":E,"Kebab Upper Case":Ce,"Pascal Case":J,"Pascal Snake Case":H,"Path Case":B,"Random Case":re,"Sentence Case":Q,"Snake Case":q,"Swap Case":ce,"Title Case":pe,"Upper Case":fe,"Upper First":ue},et=Object.keys(_),he={"Header Case":["train","dash"],"No Case":["none"],"Kebab Case":["dash","slug","param"],"Random Case":["sponge"],"Swap Case":["reverse"],"Constant Case":["macro"]};function Me(t,e){return e?t:t.toLowerCase()}function M(t,e){let n=(0,de.getPreferenceValues)();return _[e](Me(t,n.preserveCase),{prefixCharacters:n.prefixCharacters,suffixCharacters:n.suffixCharacters})}function O(t,e){let n=[],a=[],r=t.split(`
`);for(let c of r){let l=M(c,e);n.push(l),a.push((l.length===0?"\u200B":l)+`
`)}return{rawText:n.join(`
`),markdown:a.join(`
`)}}var i=require("react/jsx-runtime"),U=class t extends Error{constructor(){super("No text"),Object.setPrototypeOf(this,t.prototype)}};async function $e(){try{return await(0,s.getSelectedText)()}catch{return""}}async function me(t){let e=await s.Clipboard.readText(),n=await $e();if(t==="clipboard"){if(e)return e;if(n)return n}else{if(n)return n;if(e)return e}throw new U}var F=new s.Cache,De=()=>{let t=F.get("pinned");return t?JSON.parse(t):[]},je=()=>{let t=F.get("recent");return t?JSON.parse(t):[]},We=t=>{F.set("pinned",JSON.stringify(t))},Xe=t=>{F.set("recent",JSON.stringify(t))};function ge(t){let e=(0,s.getPreferenceValues)(),n=e.source,a=e.action,r=t.launchContext?.case;if(r){(async()=>{let o=await me(n),C=M(o,r);a==="paste"?s.Clipboard.paste(C):s.Clipboard.copy(C),(0,s.showHUD)(`Converted to ${r}`),(0,s.popToRoot)()})();return}let[c,l]=(0,g.useState)(""),[f,d]=(0,g.useState)(),[u,h]=(0,g.useState)([]),[m,p]=(0,g.useState)([]);(0,g.useEffect)(()=>{h(De()),p(je()),(0,s.getFrontmostApplication)().then(d)},[]),(0,g.useEffect)(()=>{We(u)},[u]),(0,g.useEffect)(()=>{Xe(m)},[m]);let y=async()=>{try{l(await me(n))}catch(o){o instanceof U&&(0,s.showToast)({style:s.Toast.Style.Failure,title:"Nothing to convert",message:"Please ensure that text is either selected or copied"})}};(0,g.useEffect)(()=>{y()},[]);let v=o=>(0,i.jsx)(s.Action,{title:"Copy to Clipboard",icon:s.Icon.Clipboard,onAction:()=>{o.pinned||p([o.case,...m.filter(C=>C!==o.case)].slice(0,4)),(0,s.showHUD)("Copied to Clipboard"),s.Clipboard.copy(o.modified),e.popToRoot?(0,s.popToRoot)():(0,s.closeMainWindow)()}}),x=o=>f?(0,i.jsx)(s.Action,{title:`Paste in ${f.name}`,icon:{fileIcon:f.path},onAction:()=>{o.pinned||p([o.case,...m.filter(C=>C!==o.case)].slice(0,4)),(0,s.showHUD)(`Pasted in ${f.name}`),s.Clipboard.paste(o.modified),e.popToRoot?(0,s.popToRoot)():(0,s.closeMainWindow)()}}):null,w=o=>{let C=encodeURIComponent(`{"case":"${o.case}"}`),b=`raycast://extensions/erics118/${s.environment.extensionName}/${s.environment.commandName}?context=${C}`;return(0,i.jsx)(s.List.Item,{id:o.case,title:o.case,accessories:[{text:o.modified}],detail:(0,i.jsx)(s.List.Item.Detail,{markdown:o.detail}),keywords:he[o.case],actions:(0,i.jsxs)(s.ActionPanel,{children:[(0,i.jsxs)(s.ActionPanel.Section,{children:[a==="paste"&&(0,i.jsx)(x,{...o}),(0,i.jsx)(v,{...o}),a==="copy"&&(0,i.jsx)(x,{...o})]}),(0,i.jsxs)(s.ActionPanel.Section,{children:[o.pinned?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Action,{title:"Remove Pinned Case",icon:s.Icon.PinDisabled,shortcut:s.Keyboard.Shortcut.Common.Remove,onAction:()=>{h(u.filter(S=>S!==o.case))}}),(0,i.jsx)(s.Action,{title:"Clear Pinned Cases",style:s.Action.Style.Destructive,icon:{source:s.Icon.XMarkCircle},shortcut:s.Keyboard.Shortcut.Common.RemoveAll,onAction:()=>{h([])}})]}):(0,i.jsx)(s.Action,{title:"Pin Case",icon:s.Icon.Pin,shortcut:s.Keyboard.Shortcut.Common.Pin,onAction:()=>{h([o.case,...u]),o.recent&&p(m.filter(S=>S!==o.case))}}),o.recent&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Action,{title:"Remove Recent Case",icon:s.Icon.XMarkCircle,shortcut:s.Keyboard.Shortcut.Common.Remove,onAction:()=>{p(m.filter(S=>S!==o.case))}}),(0,i.jsx)(s.Action,{title:"Clear Recent Cases",icon:{source:s.Icon.XMarkCircle,tintColor:s.Color.Red},shortcut:s.Keyboard.Shortcut.Common.RemoveAll,onAction:()=>{p([])}})]}),(0,i.jsx)(s.Action.CreateQuicklink,{title:`Create Quicklink to Convert to ${o.case}`,quicklink:{name:`Convert to ${o.case}`,link:b}})]}),(0,i.jsx)(s.ActionPanel.Section,{children:(0,i.jsx)(s.Action,{title:"Refresh Content",icon:s.Icon.RotateAntiClockwise,shortcut:s.Keyboard.Shortcut.Common.Refresh,onAction:y})})]})})};return(0,i.jsxs)(s.List,{isShowingDetail:!0,children:[(0,i.jsx)(s.List.Section,{title:"Pinned",children:u?.map(o=>{let C=O(c,o);return(0,i.jsx)(w,{case:o,modified:C.rawText,detail:C.markdown,pinned:!0},o)})}),(0,i.jsx)(s.List.Section,{title:"Recent",children:m.map(o=>{let C=O(c,o);return(0,i.jsx)(w,{case:o,modified:C.rawText,detail:C.markdown,recent:!0},o)})}),(0,i.jsx)(s.List.Section,{title:"All Cases",children:Object.keys(_).filter(o=>e[o.replace(/ +/g,"")]&&!m.includes(o)&&!u.includes(o)).map(o=>{let C=O(c,o);return(0,i.jsx)(w,{case:o,modified:C.rawText,detail:C.markdown},o)})})]})}
